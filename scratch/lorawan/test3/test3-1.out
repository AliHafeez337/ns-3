
The 1st ED sends a packet at 3seconds, other 3 devices (ED and 2GWs) listen. Both GW forwards it to NS. NS generates a reply packet and gets the best GW that can send it to ED. GW receives packet from NS and sends it. other 3 devices listen that packet and one ED (for which it was) accepts it as an ACK (reply).

------------------------


[  0%] Building CXX object scratch/CMakeFiles/scratch_lorawan_test3_test3.dir/lorawan/test3/test3.cc.o
[  0%] Linking CXX executable lorawan/test3/ns3-dev-test3-debug
SimpleLorawanNetworkExample:main(): Creating the channel...
+0.000000000s -1 SimpleLorawanNetworkExample:main(): Setting up helpers...
+0.000000000s -1 LoraPhyHelper:LoraPhyHelper(0x7ffc26551d60)
+0.000000000s -1 SimpleLorawanNetworkExample:main(): Packet to send...: 0x55acb395c490
+0.000000000s -1 SimpleLorawanNetworkExample:main(): Creating the end device...
+0.000000000s -1 LoraPhyHelper:SetDeviceType(0x7ffc26551d60, 1)
+0.000000000s -1 LorawanMacHelper:SetDeviceType(0x7ffc26551d30, 1)
+0.000000000s -1 LorawanMacHelper:SetAddressGenerator(0x7ffc26551d30)
+0.000000000s -1 LoraHelper:Install()
+0.000000000s -1 LoraNetDevice:LoraNetDevice()
+0.000000000s -1 LoraPhyHelper:Create(0x7ffc26551d60, 0, 0x55acb395cda0)
+0.000000000s -1 LoraPhy:SetChannel(0x55acb3869300, 0x55acb3875c40)
+0.000000000s -1 LoraChannel:Add(0x55acb3875c40, 0x55acb3869300)
+0.000000000s -1 LoraPhy:SetDevice(0x55acb3869300, 0x55acb395cda0)
+0.000000000s -1 LoraHelper:Install(): Done creating the PHY
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x55acb37fbbd8)
+0.000000000s -1 LorawanMac:LorawanMac(0x55acb37fbb60)
+0.000000000s -1 EndDeviceLorawanMac:EndDeviceLorawanMac(0x55acb37fbb60)
+0.000000000s -1 ClassAEndDeviceLorawanMac:ClassAEndDeviceLorawanMac(0x55acb37fbb60)
+0.000000000s -1 EndDeviceLorawanMac:SetDeviceAddress(0x55acb37fbb60, 0110110|0000000000000011101001000)
+0.000000000s -1 LorawanMacHelper:ConfigureForEuRegion()
+0.000000000s -1 LorawanMacHelper:ApplyCommonEuConfigurations()
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x7ffc26551070)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551070, 868, 868.6)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551070, 868.7, 869.2)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551070, 869.4, 869.65)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb3955820)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb39567d0)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb39558e0)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551070, 0x55acb3955820)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551070, 0x55acb39567d0)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551070, 0x55acb39558e0)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551140)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551070)
+0.000000000s -1 LoraHelper:Install(): Done creating the MAC
+0.000000000s -1 LoraNetDevice:SetNode(0x55acb395cda0)
+0.000000000s -1 LoraNetDevice:CompleteConfig()
+0.000000000s -1 LoraNetDevice:SetIfIndex(0x55acb395cda0, 0)
+0.000000000s -1 LoraNetDevice:SetReceiveCallback()
+0.000000000s -1 LoraHelper:Install(): node=0x55acb381f960, mob=1000:0:0
+0.000000000s -1 LoraNetDevice:LoraNetDevice()
+0.000000000s -1 LoraPhyHelper:Create(0x7ffc26551d60, 1, 0x55acb395d970)
+0.000000000s -1 LoraPhy:SetChannel(0x55acb38694c0, 0x55acb3875c40)
+0.000000000s -1 LoraChannel:Add(0x55acb3875c40, 0x55acb38694c0)
+0.000000000s -1 LoraPhy:SetDevice(0x55acb38694c0, 0x55acb395d970)
+0.000000000s -1 LoraHelper:Install(): Done creating the PHY
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x55acb395dba8)
+0.000000000s -1 LorawanMac:LorawanMac(0x55acb395db30)
+0.000000000s -1 EndDeviceLorawanMac:EndDeviceLorawanMac(0x55acb395db30)
+0.000000000s -1 ClassAEndDeviceLorawanMac:ClassAEndDeviceLorawanMac(0x55acb395db30)
+0.000000000s -1 EndDeviceLorawanMac:SetDeviceAddress(0x55acb395db30, 0110110|0000000000000011101001001)
+0.000000000s -1 LorawanMacHelper:ConfigureForEuRegion()
+0.000000000s -1 LorawanMacHelper:ApplyCommonEuConfigurations()
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x7ffc26551070)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551070, 868, 868.6)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551070, 868.7, 869.2)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551070, 869.4, 869.65)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb395dfc0)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb395e000)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb395e040)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551070, 0x55acb395dfc0)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551070, 0x55acb395e000)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551070, 0x55acb395e040)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551140)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551070)
+0.000000000s -1 LoraHelper:Install(): Done creating the MAC
+0.000000000s -1 LoraNetDevice:SetNode(0x55acb395d970)
+0.000000000s -1 LoraNetDevice:CompleteConfig()
+0.000000000s -1 LoraNetDevice:SetIfIndex(0x55acb395d970, 0)
+0.000000000s -1 LoraNetDevice:SetReceiveCallback()
+0.000000000s -1 LoraHelper:Install(): node=0x55acb3864a90, mob=1000:0:0
+0.000000000s -1 EndDeviceLorawanMac:SetMType(): Message type is set to 4
+0.000000000s -1 SimpleLorawanNetworkExample:main(): Creating the gateway...
+0.000000000s -1 LoraPhyHelper:SetDeviceType(0x7ffc26551d60, 0)
+0.000000000s -1 LorawanMacHelper:SetDeviceType(0x7ffc26551d30, 0)
+0.000000000s -1 LoraHelper:Install()
+0.000000000s -1 LoraNetDevice:LoraNetDevice()
+0.000000000s -1 LoraPhyHelper:Create(0x7ffc26551d60, 2, 0x55acb395ea90)
+0.000000000s -1 GatewayLoraPhy:GatewayLoraPhy()
+0.000000000s -1 LoraPhy:SetChannel(0x55acb380fc70, 0x55acb3875c40)
+0.000000000s -1 LoraChannel:Add(0x55acb3875c40, 0x55acb380fc70)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fc70, 868.1)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fc70, 868.3)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fc70, 868.5)
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 LoraPhy:SetDevice(0x55acb380fc70, 0x55acb395ea90)
+0.000000000s -1 LoraHelper:Install(): Done creating the PHY
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x55acb37efcd8)
+0.000000000s -1 LorawanMac:LorawanMac(0x55acb37efc60)
+0.000000000s -1 GatewayLorawanMac:GatewayLorawanMac(0x55acb37efc60)
+0.000000000s -1 LorawanMacHelper:ConfigureForEuRegion()
+0.000000000s -1 LorawanMacHelper:ApplyCommonEuConfigurations()
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x7ffc26551050)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551050, 868, 868.6)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551050, 868.7, 869.2)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551050, 869.4, 869.65)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb395f3a0)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb395f450)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb395f4b0)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551050, 0x55acb395f3a0)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551050, 0x55acb395f450)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551050, 0x55acb395f4b0)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551120)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551050)
+0.000000000s -1 LorawanMacHelper:ConfigureForEuRegion(): Resetting reception paths
+0.000000000s -1 GatewayLoraPhy:ResetReceptionPaths(0x55acb380fc70)
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fc70, 868.1)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fc70, 868.3)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fc70, 868.5)
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 LoraHelper:Install(): Done creating the MAC
+0.000000000s -1 LoraNetDevice:SetNode(0x55acb395ea90)
+0.000000000s -1 LoraNetDevice:CompleteConfig()
+0.000000000s -1 LoraNetDevice:SetIfIndex(0x55acb395ea90, 0)
+0.000000000s -1 LoraNetDevice:SetReceiveCallback()
+0.000000000s -1 LoraHelper:Install(): node=0x55acb3820650, mob=1000:0:0
+0.000000000s -1 LoraNetDevice:LoraNetDevice()
+0.000000000s -1 LoraPhyHelper:Create(0x7ffc26551d60, 3, 0x55acb395fb00)
+0.000000000s -1 GatewayLoraPhy:GatewayLoraPhy()
+0.000000000s -1 LoraPhy:SetChannel(0x55acb380fac0, 0x55acb3875c40)
+0.000000000s -1 LoraChannel:Add(0x55acb3875c40, 0x55acb380fac0)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fac0, 868.1)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fac0, 868.3)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fac0, 868.5)
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 LoraPhy:SetDevice(0x55acb380fac0, 0x55acb395fb00)
+0.000000000s -1 LoraHelper:Install(): Done creating the PHY
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x55acb37b8b28)
+0.000000000s -1 LorawanMac:LorawanMac(0x55acb37b8ab0)
+0.000000000s -1 GatewayLorawanMac:GatewayLorawanMac(0x55acb37b8ab0)
+0.000000000s -1 LorawanMacHelper:ConfigureForEuRegion()
+0.000000000s -1 LorawanMacHelper:ApplyCommonEuConfigurations()
+0.000000000s -1 LogicalLoraChannelHelper:LogicalLoraChannelHelper(0x7ffc26551050)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551050, 868, 868.6)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551050, 868.7, 869.2)
+0.000000000s -1 LogicalLoraChannelHelper:AddSubBand(0x7ffc26551050, 869.4, 869.65)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb3960300)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb39603b0)
+0.000000000s -1 LogicalLoraChannel:LogicalLoraChannel(0x55acb3960410)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551050, 0x55acb3960300)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551050, 0x55acb39603b0)
+0.000000000s -1 LogicalLoraChannelHelper:AddChannel(0x7ffc26551050, 0x55acb3960410)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551120)
+0.000000000s -1 LogicalLoraChannelHelper:~LogicalLoraChannelHelper(0x7ffc26551050)
+0.000000000s -1 LorawanMacHelper:ConfigureForEuRegion(): Resetting reception paths
+0.000000000s -1 GatewayLoraPhy:ResetReceptionPaths(0x55acb380fac0)
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:~ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fac0, 868.1)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fac0, 868.3)
+0.000000000s -1 GatewayLoraPhy:AddFrequency(0x55acb380fac0, 868.5)
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 GatewayLoraPhy:AddReceptionPath()
+0.000000000s -1 GatewayLoraPhy:ReceptionPath()
+0.000000000s -1 LoraHelper:Install(): Done creating the MAC
+0.000000000s -1 LoraNetDevice:SetNode(0x55acb395fb00)
+0.000000000s -1 LoraNetDevice:CompleteConfig()
+0.000000000s -1 LoraNetDevice:SetIfIndex(0x55acb395fb00, 0)
+0.000000000s -1 LoraNetDevice:SetReceiveCallback()
+0.000000000s -1 LoraHelper:Install(): node=0x55acb395eb40, mob=0:0:0
+0.000000000s -1 LorawanMacHelper:SetSpreadingFactorsUp()
+0.000000000s -1 EndDeviceLorawanMac:SetDataRate(0x55acb37fbb60, 5)
+0.000000000s -1 EndDeviceLorawanMac:SetDataRate(0x55acb395db30, 5)
+0.000000000s -1 NetworkStatus:NetworkStatus()
+0.000000000s -1 NetworkController:NetworkController()
+0.000000000s -1 NetworkServer:NetworkServer()
+0.000000000s -1 NetworkServer:AddGateway(0x55acb3960de0, 0x55acb3820650)
+0.000000000s -1 GatewayStatus:GatewayStatus(0x55acb3960d10)
+0.000000000s -1 NetworkStatus:AddGateway(0x55acb3960e80)
+0.000000000s -1 NetworkStatus:AddGateway(): Added to the list a gateway with address 02-06-00:00:00:00:00:02
+0.000000000s -1 NetworkServer:AddGateway(0x55acb3960de0, 0x55acb395eb40)
+0.000000000s -1 GatewayStatus:GatewayStatus(0x55acb39639d0)
+0.000000000s -1 NetworkStatus:AddGateway(0x55acb3960e80)
+0.000000000s -1 NetworkStatus:AddGateway(): Added to the list a gateway with address 02-06-00:00:00:00:00:04
+0.000000000s -1 NetworkServer:AddNodes()
+0.000000000s -1 NetworkServer:AddNode(0x55acb3960de0, 0x55acb381f960)
+0.000000000s -1 NetworkStatus:AddNode(0x55acb3960e80, 0x55acb37fbb60)
+0.000000000s -1 EndDeviceLorawanMac:GetDeviceAddress(0x55acb37fbb60)
+0.000000000s -1 EndDeviceStatus:EndDeviceStatus(0110110|0000000000000011101001000)
+0.000000000s -1 NetworkStatus:AddNode(): Added to the list a device with address 0110110|0000000000000011101001000
+0.000000000s -1 NetworkServer:AddNode(0x55acb3960de0, 0x55acb3864a90)
+0.000000000s -1 NetworkStatus:AddNode(0x55acb3960e80, 0x55acb395db30)
+0.000000000s -1 EndDeviceLorawanMac:GetDeviceAddress(0x55acb395db30)
+0.000000000s -1 EndDeviceStatus:EndDeviceStatus(0110110|0000000000000011101001001)
+0.000000000s -1 NetworkStatus:AddNode(): Added to the list a device with address 0110110|0000000000000011101001001
+0.000000000s -1 NetworkServer:AddComponent(0x55acb3960de0, 0x55acb3961310)
+0.000000000s -1 NetworkController:Install(0x55acb3960f60)
+0.000000000s -1 NetworkServer:AddComponent(0x55acb3960de0, 0x55acb3962890)
+0.000000000s -1 NetworkController:Install(0x55acb3960f60)
+0.000000000s -1 NetworkServer:AddComponent(0x55acb3960de0, 0x55acb3963fc0)
+0.000000000s -1 NetworkController:Install(0x55acb3960f60)
+0.000000000s -1 LoraNetDevice:SetReceiveCallback()
+0.000000000s -1 LoraNetDevice:SetReceiveCallback()
+0.000000000s 4 NetworkServer:StartApplication()
-------------------------------------------------------------
Function deviceSend called with arguments: device: 0, endDevices: <>, pkt: 0x55acb395c490

Device 0 sending with fCnt 5

+3.000000000s -1 SimpleLorawanNetworkExample:deviceSend(): Device: 0 - LoraNetDevice:0x55acb395cda0
+3.000000000s -1 LoraNetDevice:Send1(0x55acb395cda0, 0x55acb395c490)
+3.000000000s -1 LoraNetDevice:Send1(): LoraNetDevice: fCnt: 5
+3.000000000s -1 EndDeviceLorawanMac:Send1(0x55acb37fbb60, 0x55acb395c490)
+3.000000000s -1 EndDeviceLorawanMac:Send1(): EndDeviceLorawanMac::Send1 fCnt: 5


+3.000000000s -1 EndDeviceLorawanMac:GetNextTransmissionDelay()
+3.000000000s -1 LogicalLoraChannelHelper:GetEnabledChannelList(0x55acb37fbbd8)
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(0x55acb37fbbd8, 0x55acb3955820)
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(): Waiting time: 0
+3.000000000s -1 EndDeviceLorawanMac:GetNextTransmissionDelay(): Waiting time before the next transmission in channel with frequecy 868.1 is = 0.
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(0x55acb37fbbd8, 0x55acb39567d0)
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(): Waiting time: 0
+3.000000000s -1 EndDeviceLorawanMac:GetNextTransmissionDelay(): Waiting time before the next transmission in channel with frequecy 868.3 is = 0.
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(0x55acb37fbbd8, 0x55acb39558e0)
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(): Waiting time: 0
+3.000000000s -1 EndDeviceLorawanMac:GetNextTransmissionDelay(): Waiting time before the next transmission in channel with frequecy 868.5 is = 0.
+3.000000000s -1 ClassAEndDeviceLorawanMac:GetNextClassTransmissionDelay()
+3.000000000s -1 EndDeviceLorawanMac:GetChannelForTx()
+3.000000000s -1 LogicalLoraChannelHelper:GetEnabledChannelList(0x55acb37fbbd8)
+3.000000000s -1 EndDeviceLorawanMac:Shuffle()
+3.000000000s -1 EndDeviceLorawanMac:GetChannelForTx(): Frequency of the current channel: 868.3
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(0x55acb37fbbd8, 0x55acb39567d0)
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(): Waiting time: 0
+3.000000000s -1 EndDeviceLorawanMac:GetChannelForTx(): Waiting time for current channel = 0
+3.000000000s -1 LogicalLoraChannelHelper:GetTxPowerForChannel()


+3.000000000s -1 EndDeviceLorawanMac:DoSend1(0x55acb37fbb60)
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): EndDeviceLorawanMac::DoSend1 fCnt: 5
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): Received a new packet from application. Resetting retransmission parameters.
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): APP packet: 0x55acb395c490.
+3.000000000s -1 EndDeviceLorawanMac:ApplyNecessaryOptions()
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): Added frame header of size 8 bytes.
+3.000000000s -1 EndDeviceLorawanMac:ApplyNecessaryOptions()
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): Message type is 4
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): It is a confirmed packet. Setting retransmission parameters and decreasing the number of transmissions left.
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): Added MAC header of size 1 bytes.
+3.000000000s -1 EndDeviceLorawanMac:DoSend1(): Copied packet: 0x55acb395c500


+3.000000000s -1 ClassAEndDeviceLorawanMac:SendToPhy(): PacketToSend: 0x55acb395c500
+3.000000000s -1 LorawanMac:GetSfFromDataRate(0x55acb37fbb60, 5)
+3.000000000s -1 LorawanMac:GetBandwidthFromDataRate(0x55acb37fbb60, 5)
+3.000000000s -1 EndDeviceLorawanMac:GetChannelForTx()
+3.000000000s -1 LogicalLoraChannelHelper:GetEnabledChannelList(0x55acb37fbbd8)
+3.000000000s -1 EndDeviceLorawanMac:Shuffle()
+3.000000000s -1 EndDeviceLorawanMac:GetChannelForTx(): Frequency of the current channel: 868.1
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(0x55acb37fbbd8, 0x55acb3955820)
+3.000000000s -1 LogicalLoraChannelHelper:GetWaitingTime(): Waiting time: 0
+3.000000000s -1 EndDeviceLorawanMac:GetChannelForTx(): Waiting time for current channel = 0
+3.000000000s -1 ClassAEndDeviceLorawanMac:SendToPhy(): PacketToSend: 0x55acb395c500


+3.000000000s -1 SimpleEndDeviceLoraPhy:Send(0x55acb3869300, 0x55acb395c500, SF: 7, headerDisabled: 0, codingRate: 1, bandwidthHz: 125000, nPreamble: 8, crcEnabled: 1, lowDataRateOptimizationEnabled: 0), 868.1, 14)
+3.000000000s -1 SimpleEndDeviceLoraPhy:Send(): Current state: 0


+3.000000000s -1 LoraPhy:GetOnAirTime(0x55acb395c500, SF: 7, headerDisabled: 0, codingRate: 1, bandwidthHz: 125000, nPreamble: 8, crcEnabled: 1, lowDataRateOptimizationEnabled: 0))
+3.000000000s -1 LoraPhy:GetOnAirTime(): Packet of size 27 bytes
+3.000000000s -1 LoraPhy:GetOnAirTime(): Time computation: num = 232, den = 28, payloadSymbNb = 53, tSym = 0.001024
+3.000000000s -1 LoraPhy:GetOnAirTime(): tPreamble = 0.012544
+3.000000000s -1 LoraPhy:GetOnAirTime(): tPayload = 0.054272
+3.000000000s -1 LoraPhy:GetOnAirTime(): Total time = 0.066816
+3.000000000s -1 EndDeviceLoraPhy:SwitchToTx()
+3.000000000s -1 SimpleEndDeviceLoraPhy:Send(): Sending the packet in the channel


There are total 4 devices:
1st - sender ED
2nd - ED (in sleep mode as it didn't send anything)
3rd - GW
4th - GW
"Scheduling reception of the packet" is 3 times below:


+3.000000000s -1 LoraChannel:Send(0x55acb3875c40, 0x55acb3869300, 0x55acb395c500, 14, SF: 7, headerDisabled: 0, codingRate: 1, bandwidthHz: 125000, nPreamble: 8, crcEnabled: 1, lowDataRateOptimizationEnabled: 0), +6.6816e+07ns, 868.1)
+3.000000000s -1 LoraPhy:GetMobility()
+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395cda0)
+3.000000000s -1 LoraChannel:Send(): Starting cycle over all 4 PHYs
+3.000000000s -1 LoraChannel:Send(): Sender mobility: 1000:0:0
+3.000000000s -1 LoraPhy:GetMobility()
+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395d970)
+3.000000000s -1 LoraChannel:Send(): Receiver mobility: 1000:0:0
+3.000000000s -1 LoraChannel:Send(): Propagation: txPower=14dbm, rxPower=6.3dbm, distance=0m, delay=+0ns
+3.000000000s -1 LoraChannel:Send(): Getting node index from NetDevice, since it exists
+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395d970)
+3.000000000s -1 LoraChannel:Send(): dstNode = 1
+3.000000000s -1 LoraChannel:Send(): Scheduling reception of the packet
+3.000000000s -1 LoraPhy:GetMobility()
+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395ea90)
+3.000000000s -1 LoraChannel:Send(): Receiver mobility: 1000:0:0
+3.000000000s -1 LoraChannel:Send(): Propagation: txPower=14dbm, rxPower=6.3dbm, distance=0m, delay=+0ns
+3.000000000s -1 LoraChannel:Send(): Getting node index from NetDevice, since it exists
+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395ea90)
+3.000000000s -1 LoraChannel:Send(): dstNode = 2
+3.000000000s -1 LoraChannel:Send(): Scheduling reception of the packet
+3.000000000s -1 LoraPhy:GetMobility()
+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395fb00)
+3.000000000s -1 LoraChannel:Send(): Receiver mobility: 0:0:0
+3.000000000s -1 LoraChannel:Send(): Propagation: txPower=14dbm, rxPower=-106.5dbm, distance=1000m, delay=+3336ns
+3.000000000s -1 LoraChannel:Send(): Getting node index from NetDevice, since it exists
+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395fb00)
+3.000000000s -1 LoraChannel:Send(): dstNode = 3
+3.000000000s -1 LoraChannel:Send(): Scheduling reception of the packet


After "Scheduling reception of the packet", control will goto "Receive" of "LoraChanel" and then to "Phy" and "Mac" of devices (ED and GW)

HERE, after ED sending the packet, is computing packet duration (see the comments in ClassAEndDeviceLorawanMac::SendToPhy) and after that it will prepare for Downlink


+3.000000000s -1 LoraNetDevice:GetNode(0x55acb395cda0)
+3.000000000s -1 LoraPhy:GetOnAirTime(0x55acb395c500, SF: 7, headerDisabled: 0, codingRate: 1, bandwidthHz: 125000, nPreamble: 8, crcEnabled: 1, lowDataRateOptimizationEnabled: 0))
+3.000000000s -1 LoraPhy:GetOnAirTime(): Packet of size 27 bytes
+3.000000000s -1 LoraPhy:GetOnAirTime(): Time computation: num = 232, den = 28, payloadSymbNb = 53, tSym = 0.001024
+3.000000000s -1 LoraPhy:GetOnAirTime(): tPreamble = 0.012544
+3.000000000s -1 LoraPhy:GetOnAirTime(): tPayload = 0.054272
+3.000000000s -1 LoraPhy:GetOnAirTime(): Total time = 0.066816
+3.000000000s -1 LogicalLoraChannelHelper:AddEvent(0x55acb37fbbd8, +6.6816e+07ns, 0x55acb3955820)
+3.000000000s -1 LogicalLoraChannelHelper:AddEvent(): Time on air: 0.066816
+3.000000000s -1 LogicalLoraChannelHelper:AddEvent(): m_aggregatedDutyCycle: 1
+3.000000000s -1 LogicalLoraChannelHelper:AddEvent(): Current time: 3
+3.000000000s -1 LogicalLoraChannelHelper:AddEvent(): Next transmission on this sub-band allowed at time: 9.61478
+3.000000000s -1 LogicalLoraChannelHelper:AddEvent(): Next aggregated transmission allowed at time 3
+3.000000000s -1 ClassAEndDeviceLorawanMac:SendToPhy(): m_dataRate: 5, m_rx1DrOffset: 0, replyDataRate: 5.
+3.000000000s -1 LorawanMac:GetSfFromDataRate(0x55acb37fbb60, 5)


Here, the devices are receiving the transmitted packet.


+3.000000000s 1 LoraChannel:Receive(0x55acb3875c40, 1, 0x55acb395c500, (rxPowerDbm: 6.3, SF: 7, durationSec: 0.066816, frequencyMHz: 868.1))
+3.000000000s 1 SimpleEndDeviceLoraPhy:StartReceive(0x55acb38694c0, 0x55acb395c500, 6.3, 7, +6.6816e+07ns, 868.1)
+3.000000000s 1 SimpleEndDeviceLoraPhy:StartReceive(): Dropping packet because device is in SLEEP state


+3.000000000s 2 LoraChannel:Receive(0x55acb3875c40, 2, 0x55acb395c500, (rxPowerDbm: 6.3, SF: 7, durationSec: 0.066816, frequencyMHz: 868.1))
+3.000003336s 3 LoraChannel:Receive(0x55acb3875c40, 3, 0x55acb395c500, (rxPowerDbm: -106.5, SF: 7, durationSec: 0.066816, frequencyMHz: 868.1))


Called by the sender ( continues after line: "LorawanMac:GetSfFromDataRate(0x55acb37fbb60, 5)" )

+3.066816000s -1 EndDeviceLoraPhy:SwitchToStandby()


Again to the receivers... ( continues after "LoraChannel:Receive(" )


+3.066816000s 2 LoraNetDevice:GetNode(0x55acb395ea90)
+3.066816000s 2 GatewayLorawanMac:Receive(0x55acb37efc60, 0x55acb395c500)
+3.066816000s 2 LoraNetDevice:Receive(0x55acb395ea90, 0x55acb395d0a0)
+3.066816000s 2 LoraNetDevice:Receive(): Calling receiveCallback
+3.066816000s 2 GatewayLorawanMac:Receive(): Received packet: 0x55acb395c500



+3.066816010s -1 ClassAEndDeviceLorawanMac:TxFinished()
+3.066816010s -1 EndDeviceLoraPhy:SwitchToSleep()



+3.066819336s 3 LoraNetDevice:GetNode(0x55acb395fb00)
+3.066819336s 3 GatewayLorawanMac:Receive(0x55acb37b8ab0, 0x55acb395c500)
+3.066819336s 3 LoraNetDevice:Receive(0x55acb395fb00, 0x55acb395d0a0)
+3.066819336s 3 LoraNetDevice:Receive(): Calling receiveCallback
+3.066819336s 3 GatewayLorawanMac:Receive(): Received packet: 0x55acb395c500


Receiving from 1st GW

+3.068862400s 4 NetworkServer:Receive(0x55acb3960de0, 0x55acb395e9d0, 2048, 02-06-00:00:00:00:00:02)

+3.068862400s 4 NetworkScheduler:OnReceivedPacket(0x55acb395e9d0)
+3.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb395e9d0)
+3.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb395e9d0)

+3.068862400s 4 NetworkStatus:OnReceivedPacket(0x55acb3960e80, 0x55acb395e9d0, 02-06-00:00:00:00:00:02)
+3.068862400s 4 NetworkStatus:OnReceivedPacket(): Node address: 0110110|0000000000000011101001000
+3.068862400s 4 EndDeviceStatus:InsertReceivedPacket()
+3.068862400s 4 EndDeviceStatus:SetFirstReceiveWindowSpreadingFactor()
+3.068862400s 4 EndDeviceStatus:SetFirstReceiveWindowFrequency()
+3.068862400s 4 EndDeviceStatus:InsertReceivedPacket(): Packet was received for the first time
+3.068862400s 4 EndDeviceStatus:InsertReceivedPacket(): Total packets received: 1
0x55acb395e9d0 1
  02-06-00:00:00:00:00:02 6.3

+3.068862400s 4 NetworkController:OnNewPacket(0x55acb3960f60, 0x55acb395e9d0)
+3.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb395e9d0)
+3.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb395e9d0)
+3.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb395e9d0)


Receiving from 2nd GW

+3.068865736s 4 NetworkServer:Receive(0x55acb3960de0, 0x55acb37aed70, 2048, 02-06-00:00:00:00:00:04)

+3.068865736s 4 NetworkScheduler:OnReceivedPacket(0x55acb37aed70)
+3.068865736s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb37aed70)
+3.068865736s 4 NetworkStatus:OnReceivedPacket(0x55acb3960e80, 0x55acb37aed70, 02-06-00:00:00:00:00:04)
+3.068865736s 4 NetworkStatus:OnReceivedPacket(): Node address: 0110110|0000000000000011101001000
+3.068865736s 4 EndDeviceStatus:InsertReceivedPacket()
+3.068865736s 4 EndDeviceStatus:SetFirstReceiveWindowSpreadingFactor()
+3.068865736s 4 EndDeviceStatus:SetFirstReceiveWindowFrequency()
+3.068865736s 4 EndDeviceStatus:InsertReceivedPacket(): Received packet's frame counter: 5
Current packet's frame counter: 5
+3.068865736s 4 EndDeviceStatus:InsertReceivedPacket(): Packet was already received by another gateway
+3.068865736s 4 EndDeviceStatus:InsertReceivedPacket(): Size of gateway list: 2
+3.068865736s 4 EndDeviceStatus:InsertReceivedPacket(): Total packets received: 1
0x55acb395e9d0 2
  02-06-00:00:00:00:00:02 6.3
  02-06-00:00:00:00:00:04 -106.5

+3.068865736s 4 NetworkController:OnNewPacket(0x55acb3960f60, 0x55acb37aed70)
+3.068865736s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb37aed70)
+3.068865736s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb37aed70)
+3.068865736s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0x55acb37aed70)
+4.066816010s -1


After "ClassAEndDeviceLorawanMac:TxFinished()", it opens first and then second receive window.

ClassAEndDeviceLorawanMac:OpenFirstReceiveWindow()
+4.066816010s -1 EndDeviceLoraPhy:SwitchToStandby()
+4.066816010s -1 LorawanMac:GetSfFromDataRate(0x55acb37fbb60, 5)
+4.066816010s -1 LorawanMac:GetBandwidthFromDataRate(0x55acb37fbb60, 5)
+4.068862400s 4 NetworkScheduler:OnReceiveWindowOpportunity(0110110|0000000000000011101001000)
+4.068862400s 4 


Again to NW, called by "NetworkScheduler::OnReceivedPacket"

NetworkScheduler:OnReceiveWindowOpportunity(): Opening receive window number 1 for device 0110110|0000000000000011101001000

Continues by NW (just there is a middlewere "NetworkStatus::GetBestGatewayForDevice" called by "NetworkScheduler:OnReceiveWindowOpportunity")

+4.068862400s 4 EndDeviceStatus:GetFirstReceiveWindowFrequency()

+4.068862400s 4 GatewayLorawanMac:GetWaitingTime()
+4.068862400s 4 LogicalLoraChannel:LogicalLoraChannel(0x55acb382a8f0)
+4.068862400s 4 LogicalLoraChannelHelper:GetWaitingTime(0x55acb37efcd8, 0x55acb382a8f0)
+4.068862400s 4 LogicalLoraChannelHelper:GetWaitingTime(): Waiting time: 0
+4.068862400s 4 LogicalLoraChannel:~LogicalLoraChannel(0x55acb382a8f0)
+4.068862400s 4 

NetworkScheduler:OnReceiveWindowOpportunity(): Found available gateway with address: 02-06-00:00:00:00:00:02
+4.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0110110|0000000000000011101001000)
+4.068862400s 4 NetworkController:BeforeSendingReply(0x55acb3960f60)
+4.068862400s 4 EndDeviceStatus:GetLastPacketReceivedFromDevice()
+4.068862400s 4 EndDeviceStatus:GetLastPacketReceivedFromDevice()
+4.068862400s 4 EndDeviceStatus:NeedsReply()
+4.068862400s 4 NetworkScheduler:OnReceiveWindowOpportunity(): A reply is needed
+4.068862400s 4 EndDeviceStatus:GetCompleteReplyPacket()
+4.068862400s 4 EndDeviceStatus:GetCompleteReplyPacket(): Crafting reply packet using an empty payload
+4.068862400s 4 EndDeviceStatus:GetLastPacketReceivedFromDevice()
+4.068862400s 4 EndDeviceStatus:GetCompleteReplyPacket(): Added MAC headerMessageType=3
Major=0

+4.068862400s 4 EndDeviceStatus:GetCompleteReplyPacket(): Added frame headerAddress=0110110|0000000000000011101001000
ADR=0
ADRAckReq=0
ACK=1
FPending=0
FOptsLen=0
FCnt=5
FPort=0
+4.068862400s 4 EndDeviceStatus:GetFirstReceiveWindowFrequency()
+4.068862400s 4 NetworkStatus:SendThroughGateway(0x55acb395d110, 02-06-00:00:00:00:00:02)
+4.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0110110|0000000000000011101001000)
+4.068862400s 4 NetworkStatus:GetEndDeviceStatus(0x55acb3960e80, 0110110|0000000000000011101001000)
+4.068862400s 4 EndDeviceStatus:InitializeReply()


Sending from GW to ED


+4.070880000s 2 LoraNetDevice:Send(0x55acb395ea90, 0x55acb37c0380)
+4.070880000s 2 GatewayLorawanMac:Send(0x55acb37efc60, 0x55acb37c0380)
+4.070880000s 2 GatewayLorawanMac:Send(): DR: 5
+4.070880000s 2 GatewayLorawanMac:Send(): SF: +4.070880000s 2 LorawanMac:GetSfFromDataRate(0x55acb37efc60, 5)
7
+4.070880000s 2 GatewayLorawanMac:Send(): BW: +4.070880000s 2 LorawanMac:GetBandwidthFromDataRate(0x55acb37efc60, 5)
125000
+4.070880000s 2 GatewayLorawanMac:Send(): Freq: 868.1 MHz
+4.070880000s 2 LogicalLoraChannel:LogicalLoraChannel(0x55acb38c28f0)
+4.070880000s 2 LogicalLoraChannelHelper:GetWaitingTime(0x55acb37efcd8, 0x55acb38c28f0)
+4.070880000s 2 LogicalLoraChannelHelper:GetWaitingTime(): Waiting time: 0
+4.070880000s 2 LogicalLoraChannel:~LogicalLoraChannel(0x55acb38c28f0)
+4.070880000s 2 LorawanMac:GetSfFromDataRate(0x55acb37efc60, 5)
+4.070880000s 2 LorawanMac:GetBandwidthFromDataRate(0x55acb37efc60, 5)
+4.070880000s 2 LoraPhy:GetOnAirTime(0x55acb37c0380, SF: 7, headerDisabled: 0, codingRate: 1, bandwidthHz: 125000, nPreamble: 8, crcEnabled: 1, lowDataRateOptimizationEnabled: 0))
+4.070880000s 2 LoraPhy:GetOnAirTime(): Packet of size 9 bytes
+4.070880000s 2 LoraPhy:GetOnAirTime(): Time computation: num = 88, den = 28, payloadSymbNb = 28, tSym = 0.001024
+4.070880000s 2 LoraPhy:GetOnAirTime(): tPreamble = 0.012544
+4.070880000s 2 LoraPhy:GetOnAirTime(): tPayload = 0.028672
+4.070880000s 2 LoraPhy:GetOnAirTime(): Total time = 0.041216
+4.070880000s 2 GatewayLorawanMac:Send(): Duration: 0.041216
+4.070880000s 2 LogicalLoraChannel:LogicalLoraChannel(0x55acb38c28f0)
+4.070880000s 2 LogicalLoraChannelHelper:GetTxPowerForChannel()
+4.070880000s 2 LogicalLoraChannel:~LogicalLoraChannel(0x55acb38c28f0)
+4.070880000s 2 LogicalLoraChannel:LogicalLoraChannel(0x55acb38c28f0)
+4.070880000s 2 LogicalLoraChannelHelper:AddEvent(0x55acb37efcd8, +4.1216e+07ns, 0x55acb38c28f0)
+4.070880000s 2 LogicalLoraChannelHelper:AddEvent(): Time on air: 0.041216
+4.070880000s 2 LogicalLoraChannelHelper:AddEvent(): m_aggregatedDutyCycle: 1
+4.070880000s 2 LogicalLoraChannelHelper:AddEvent(): Current time: 4.07088
+4.070880000s 2 LogicalLoraChannelHelper:AddEvent(): Next transmission on this sub-band allowed at time: 8.15126
+4.070880000s 2 LogicalLoraChannelHelper:AddEvent(): Next aggregated transmission allowed at time 4.07088
+4.070880000s 2 LogicalLoraChannel:~LogicalLoraChannel(0x55acb38c28f0)


Calling "simple-gateway-lora-phy::Send"


+4.070880000s 2 LoraPhy:GetOnAirTime(0x55acb37c0380, SF: 7, headerDisabled: 0, codingRate: 1, bandwidthHz: 125000, nPreamble: 8, crcEnabled: 1, lowDataRateOptimizationEnabled: 0))
+4.070880000s 2 LoraPhy:GetOnAirTime(): Packet of size 9 bytes
+4.070880000s 2 LoraPhy:GetOnAirTime(): Time computation: num = 88, den = 28, payloadSymbNb = 28, tSym = 0.001024
+4.070880000s 2 LoraPhy:GetOnAirTime(): tPreamble = 0.012544
+4.070880000s 2 LoraPhy:GetOnAirTime(): tPayload = 0.028672
+4.070880000s 2 LoraPhy:GetOnAirTime(): Total time = 0.041216
+4.070880000s 2 LoraChannel:Send(0x55acb3875c40, 0x55acb380fc70, 0x55acb37c0380, 14, SF: 7, headerDisabled: 0, codingRate: 1, bandwidthHz: 125000, nPreamble: 8, crcEnabled: 1, lowDataRateOptimizationEnabled: 0), +4.1216e+07ns, 868.1)
+4.070880000s 2 LoraPhy:GetMobility()
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395ea90)
+4.070880000s 2 LoraChannel:Send(): Starting cycle over all 4 PHYs
+4.070880000s 2 LoraChannel:Send(): Sender mobility: 1000:0:0
+4.070880000s 2 LoraPhy:GetMobility()
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395cda0)


Sending through LoraChannel. (Search for "Scheduling reception of the packet")


+4.070880000s 2 LoraChannel:Send(): Receiver mobility: 1000:0:0
+4.070880000s 2 LoraChannel:Send(): Propagation: txPower=14dbm, rxPower=6.3dbm, distance=0m, delay=+0ns
+4.070880000s 2 LoraChannel:Send(): Getting node index from NetDevice, since it exists
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395cda0)
+4.070880000s 2 LoraChannel:Send(): dstNode = 0
+4.070880000s 2 LoraChannel:Send(): Scheduling reception of the packet
+4.070880000s 2 LoraPhy:GetMobility()
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395d970)
+4.070880000s 2 LoraChannel:Send(): Receiver mobility: 1000:0:0
+4.070880000s 2 LoraChannel:Send(): Propagation: txPower=14dbm, rxPower=6.3dbm, distance=0m, delay=+0ns
+4.070880000s 2 LoraChannel:Send(): Getting node index from NetDevice, since it exists
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395d970)
+4.070880000s 2 LoraChannel:Send(): dstNode = 1
+4.070880000s 2 LoraChannel:Send(): Scheduling reception of the packet
+4.070880000s 2 LoraPhy:GetMobility()
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395fb00)
+4.070880000s 2 LoraChannel:Send(): Receiver mobility: 0:0:0
+4.070880000s 2 LoraChannel:Send(): Propagation: txPower=14dbm, rxPower=-106.5dbm, distance=1000m, delay=+3336ns
+4.070880000s 2 LoraChannel:Send(): Getting node index from NetDevice, since it exists
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395fb00)
+4.070880000s 2 LoraChannel:Send(): dstNode = 3
+4.070880000s 2 LoraChannel:Send(): Scheduling reception of the packet
+4.070880000s 2 LoraNetDevice:GetNode(0x55acb395ea90)


Received by devices (being called from "lora-channel:Send")


+4.070880000s 0 LoraChannel:Receive(0x55acb3875c40, 0, 0x55acb37c0380, (rxPowerDbm: 6.3, SF: 7, durationSec: 0.041216, frequencyMHz: 868.1))
+4.070880000s 0 SimpleEndDeviceLoraPhy:StartReceive(0x55acb3869300, 0x55acb37c0380, 6.3, 7, +4.1216e+07ns, 868.1)
+4.070880000s 0 EndDeviceLoraPhy:SwitchToRx()
+4.070880000s 0 SimpleEndDeviceLoraPhy:StartReceive(): Scheduling reception of a packet. End in 0.041216 seconds


+4.070880000s 1 LoraChannel:Receive(0x55acb3875c40, 1, 0x55acb37c0380, (rxPowerDbm: 6.3, SF: 7, durationSec: 0.041216, frequencyMHz: 868.1))
+4.070880000s 1 SimpleEndDeviceLoraPhy:StartReceive(0x55acb38694c0, 0x55acb37c0380, 6.3, 7, +4.1216e+07ns, 868.1)
+4.070880000s 1 SimpleEndDeviceLoraPhy:StartReceive(): Dropping packet because device is in SLEEP state


+4.070883336s 3 LoraChannel:Receive(0x55acb3875c40, 3, 0x55acb37c0380, (rxPowerDbm: -106.5, SF: 7, durationSec: 0.041216, frequencyMHz: 868.1))


"ClassAEndDeviceLorawanMac:OpenFirstReceiveWindow" calls "ClassAEndDeviceLorawanMac:CloseFirstReceiveWindow"

+4.075008010s -1 ClassAEndDeviceLorawanMac:CloseFirstReceiveWindow()



The "LoraChannel:Receive" will call "SimpleEndDeviceLoraPhy:StartReceive" which will call below functions.


+4.075008010s -1 EndDeviceLoraPhy:GetState()
+4.112096000s 0 SimpleEndDeviceLoraPhy:EndReceive(0x55acb3869300, 0x55acb37c0380, 0x55acb382a8f0)
+4.112096000s 0 EndDeviceLoraPhy:SwitchToStandby()
+4.112096000s 0 SimpleEndDeviceLoraPhy:EndReceive(): Packet received correctly


+4.112096000s 0 LoraNetDevice:GetNode(0x55acb395cda0)
+4.112096000s 0 ClassAEndDeviceLorawanMac:Receive(0x55acb37fbb60, 0x55acb37c0380)
+4.112096000s 0 ClassAEndDeviceLorawanMac:Receive(): Mac Header: MessageType=3
Major=0

+4.112096000s 0 ClassAEndDeviceLorawanMac:Receive(): Found a downlink packet.
+4.112096000s 0 ClassAEndDeviceLorawanMac:Receive(): Frame Header: Address=0110110|0000000000000011101001000
ADR=0
ADRAckReq=0
ACK=1
FPending=0
FOptsLen=0
FCnt=5
FPort=0

+4.112096000s 0 ClassAEndDeviceLorawanMac:Receive(): The message is for us!
+4.112096000s 0 EndDeviceLorawanMac:ParseCommands(0x55acb37fbb60, Address=0110110|0000000000000011101001000
ADR=0
ADRAckReq=0
ACK=1
FPending=0
FOptsLen=0
FCnt=5
FPort=0
)
+4.112096000s 0 EndDeviceLorawanMac:ParseCommands(): The message is an ACK, not waiting for it anymore.
+4.112096000s 0 EndDeviceLorawanMac:ParseCommands(): Reset retransmission variables to default values and cancel retransmission if already scheduled.
+4.112096000s 0 EndDeviceLorawanMac:ParseCommands(): Received ACK packet after 1 transmissions: stopping retransmission procedure. 
+4.112096000s 0 EndDeviceLoraPhy:SwitchToSleep()


The downlink packet sent by 1st GW is also received by GW and its not forwarding it (in below logs):


+4.112099336s 3 LoraNetDevice:GetNode(0x55acb395fb00)
+4.112099336s 3 GatewayLorawanMac:Receive(0x55acb37b8ab0, 0x55acb37c0380)
+4.112099336s 3 GatewayLorawanMac:Receive(): Not forwarding downlink message to NetDevice